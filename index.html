<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>three.js app</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <header>
      <div class="logo"><img src="logo.png" /></div>
      <div class="price">
        <div class="number" id="price-number">350.000</div>
        <div class="currency">&nbspTL</div>
      </div>
    </header>
    <script src="js/three.js"></script>
    <script src="js/GLTFLoader.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script>
      function handleChange(item, set) {
        set ? (item.visible = true) : (item.visible = false);
      }
      function handleColor(color) {
        yacht.traverse((object) => {
          if (object.isMesh) {
            object.material.color.set(color);
          }
        });
        pruva.traverse((object) => {
          if (object.isMesh) {
            object.material.color.set(color);
          }
        });
      }
      //scene and camera
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x87ceeb);
      const camera = new THREE.PerspectiveCamera(
        70,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.set(-1, 1.5, -2);
      camera.lookAt(scene.position);
      clock = new THREE.Clock();

      //load models
      var loader = new THREE.GLTFLoader();

      loader.load(
        "models/yacht.glb",
        function (gltf) {
          yacht = gltf.scene;
          scene.add(yacht);
        },
        undefined,
        function (error) {
          console.error(error);
        }
      );
      loader.load(
        "models/gunespaneli.glb",
        function (gltf) {
          gunespaneli = gltf.scene;
          scene.add(gunespaneli);
          gunespaneli.visible = false;
        },
        undefined,
        function (error) {
          console.error(error);
        }
      );
      loader.load(
        "models/pruva.glb",
        function (gltf) {
          pruva = gltf.scene;
          scene.add(pruva);
          pruva.visible = false;
        },
        undefined,
        function (error) {
          console.error(error);
        }
      );
      loader.load(
        "models/kamaracami.glb",
        function (gltf) {
          kamaracami = gltf.scene;
          scene.add(kamaracami);
        },
        undefined,
        function (error) {
          console.error(error);
        }
      );
      loader.load(
        "models/camtavan.glb",
        function (gltf) {
          camtavan = gltf.scene;
          scene.add(camtavan);
          camtavan.visible = false;
        },
        undefined,
        function (error) {
          console.error(error);
        }
      );

      //renderer
      const renderer = new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      //controls
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.maxPolarAngle = Math.PI * 0.4;

      //light
      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 1.5);
      hemiLight.position.set(0, 30, 0);
      scene.add(hemiLight);

      //window resize check
      window.addEventListener("resize", onWindowResize, false);
      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      //animate
      function animate() {
        requestAnimationFrame(animate);
        //scene.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      animate();

      function cameraPositionSet(pos) {
        camera.position.set(pos[0], pos[1], pos[2]);
        camera.lookAt(scene.position);
      }
    </script>

    <div class="selection-panel">
      <ul class="tabs">
        <li
          data-num=".one"
          class="active"
          onclick="cameraPositionSet([-0.30825926388376357,
        0.549345330686679,
        -1.6623718548756092])"
        >
          PRUVA
        </li>
        <li
          data-num=".two"
          onclick="cameraPositionSet([-0.6316871686949006, 1.5861617486346256, -0.4953246188859876])"
        >
          CAM TAVAN
        </li>
        <li
          data-num=".three"
          onclick="cameraPositionSet([-0.5653604908552885, 1.2424859404337292, -1.5606938131080028])"
        >
          GÜNEŞ PANELİ
        </li>
        <li
          data-num=".four"
          onclick="cameraPositionSet([-1.4750161163626523, 0.677156112240673, -0.7253077320182933])"
        >
          RENK SEÇİMİ
        </li>
      </ul>
      <div class="content">
        <div class="one item active">
          <div
            class="selection"
            onclick="handleChange(pruva,false), handlePartPrices(0,0)"
          >
            Pruva İstemiyorum
          </div>
          <div
            class="selection"
            onclick="handleChange(pruva,true), handlePartPrices(5200,0)"
          >
            Pruva 1
            <div class="selection-info">Pruva Özellikleri</div>
            <div class="selection-price">5200 TL</div>
          </div>
        </div>
        <div class="two item">
          <div
            class="selection"
            onclick="handleChange(camtavan,false), handlePartPrices(0,1)"
          >
            Cam Tavan İstemiyorum
          </div>
          <div
            class="selection"
            onclick="handleChange(camtavan,true), handlePartPrices(3000,1)"
          >
            Cam Tavan 1
            <div class="selection-info">Cam Tavan Özellikleri</div>
            <div class="selection-price">3000 TL</div>
          </div>
        </div>
        <div class="three item">
          <div
            class="selection"
            onclick="handleChange(gunespaneli,false),handlePartPrices(0,2)"
          >
            Güneş Paneli İstemiyorum
          </div>
          <div
            class="selection"
            onclick="handleChange(gunespaneli,true),handlePartPrices(11000,2)"
          >
            Güneş Paneli 1
            <div class="selection-info">Güneş Paneli Özellikleri</div>
            <div class="selection-price">11000 TL</div>
          </div>
        </div>
        <div class="four item">
          <div
            class="selection"
            onclick="handleColor(0xffffff),handlePartPrices(0,3)"
          >
            Beyaz
            <div
              class="selection-color"
              style="background-color: #ffffff"
            ></div>
            <div class="selection-price">Standart</div>
          </div>
          <div
            class="selection"
            onclick="handleColor(0xaeaeae)
          ,handlePartPrices(10500,3)"
          >
            Koyu Gri
            <div
              class="selection-color"
              style="background-color: #aeaeae"
            ></div>
            <div class="selection-price">10500 TL</div>
          </div>
        </div>
      </div>
    </div>

    <script src="js/index.js"></script>
  </body>
</html>
